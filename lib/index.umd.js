!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).blindnet={})}(this,(function(t){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */function e(t,e,n,r){return new(n||(n=Promise))((function(i,o){function s(t){try{c(r.next(t))}catch(t){o(t)}}function a(t){try{c(r.throw(t))}catch(t){o(t)}}function c(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}c((r=r.apply(t,e||[])).next())}))}function n(t){return new Promise(((e,n)=>{t.oncomplete=t.onsuccess=()=>e(t.result),t.onabort=t.onerror=()=>n(t.error)}))}function r(t,e){const r=(!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise((function(t){var e=function(){return indexedDB.databases().finally(t)};i=setInterval(e,100),e()})).finally((function(){return clearInterval(i)})):Promise.resolve()).then((()=>{const r=indexedDB.open(t);return r.onupgradeneeded=()=>r.result.createObjectStore(e),n(r)}));var i;return(t,n)=>r.then((r=>n(r.transaction(e,t).objectStore(e))))}let i;function o(){return i||(i=r("keyval-store","keyval")),i}function s(t,e=o()){return e("readonly",(e=>n(e.get(t))))}class a{constructor(t="blindnet",e="keys"){this.keys=["private_enc","public_enc","private_sign","public_sign","derived"],this.keyLabels=["eSK","ePK","sSK","sPK","aes"],this.storeKey=(t,e)=>function(t,e,r=o()){return r("readwrite",(r=>(r.put(e,t),n(r.transaction))))}(t,e,this.store),this.storeKeys=(t,e,r,i,s)=>function(t,e=o()){return e("readwrite",(e=>(t.forEach((t=>e.put(t[1],t[0]))),n(e.transaction))))}([["private_enc",t],["public_enc",e],["private_sign",r],["public_sign",i],["derived",s]],this.store),this.getKey=t=>s(t,this.store),this.getSignKey=t=>s(t,this.store),this.getKeys=()=>function(t,e=o()){return e("readonly",(e=>Promise.all(t.map((t=>n(e.get(t)))))))}(this.keys,this.store).then((t=>t.reduce(((t,e,n)=>Object.assign(Object.assign({},t),{[this.keyLabels[n]]:e})),{}))),this.clear=()=>function(t=o()){return t("readwrite",(t=>(t.clear(),n(t.transaction))))}(this.store),this.store=r(t,e)}}const c="object"==typeof window;function d(t){return(new TextEncoder).encode(t)}function l(t){return(new TextDecoder).decode(t)}function u(t){return c?Uint8Array.from(window.atob(t),(t=>t.charCodeAt(0))):Buffer.from(t,"base64")}function y(t){if(c){const e=new Uint8Array(t);let n="";for(let t=0;t<e.length;t++)n+=String.fromCharCode(e[t]);return window.btoa(n)}return Buffer.from(t).toString("base64")}function h(...t){var e=new Uint8Array(t.reduce(((t,e)=>t+e.byteLength),0));let n=0;return t.forEach((t=>{e.set(t instanceof ArrayBuffer?new Uint8Array(t):t,n),n+=t.byteLength})),e.buffer}function f(t){return new Uint8Array(t).reduce(((t,e,n)=>t+e*Math.pow(2,24-8*n)),0)}function p(t){return[t<<16,t<<24].map((t=>t>>>24))}function v(t){return new Uint8Array(t).reduce(((t,e,n)=>t+e*Math.pow(2,8-8*n)),0)}function w(t,e){try{return t()}catch(t){throw e}}function g(t,n){return e(this,void 0,void 0,(function*(){try{return yield t()}catch(t){throw n}}))}class m{constructor(t,n,r){this.apiUrl=void 0,this.protocolVersion=void 0,this.token=void 0,this.registerUser=(t,n,r,i,o,s,a)=>e(this,void 0,void 0,(function*(){const e=yield fetch(`${this.apiUrl}/api/v${this.protocolVersion}/users`,{method:"POST",mode:"cors",headers:{"Content-Type":"application/json",Authorization:`Bearer ${this.token}`},body:JSON.stringify({publicEncryptionKey:y(t),publicSigningKey:y(n),encryptedPrivateEncryptionKey:y(r),encryptedPrivateSigningKey:y(i),keyDerivationSalt:y(o),signedJwt:y(s),signedPublicEncryptionKey:y(a)})});return yield b(e)((t=>{}))})),this.getUserData=()=>e(this,void 0,void 0,(function*(){const t=yield fetch(`${this.apiUrl}/api/v${this.protocolVersion}/keys/me`,{method:"GET",mode:"cors",headers:{"Content-Type":"application/json",Authorization:`Bearer ${this.token}`}});return yield b(t,{type:"UserNotFound"})((function(t){return{type:"UserFound",userData:{enc_PK:t.publicEncryptionKey,e_enc_SK:t.encryptedPrivateEncryptionKey,sign_PK:t.publicSigningKey,e_sign_SK:t.encryptedPrivateSigningKey,salt:t.keyDerivationSalt}}}))})),this.getUsersPublicKey=t=>e(this,void 0,void 0,(function*(){const e=yield fetch(`${this.apiUrl}/api/v${this.protocolVersion}/keys/${t}`,{method:"GET",mode:"cors",headers:{"Content-Type":"application/json",Authorization:`Bearer ${this.token}`}});return yield b(e)((t=>Object.assign({},t)))})),this.getPublicKeys=t=>e(this,void 0,void 0,(function*(){const e=yield fetch(`${this.apiUrl}/api/v${this.protocolVersion}/keys`,{method:"POST",mode:"cors",headers:{"Content-Type":"application/json",Authorization:`Bearer ${this.token}`},body:JSON.stringify({userIds:t})});return yield b(e)((t=>t))})),this.getGroupPublicKeys=t=>e(this,void 0,void 0,(function*(){const e=yield fetch(`${this.apiUrl}/api/v${this.protocolVersion}/keys`,{method:"POST",mode:"cors",headers:{"Content-Type":"application/json",Authorization:`Bearer ${this.token}`},body:JSON.stringify({groupId:t})});return yield b(e)((t=>t))})),this.postEncryptedKeys=t=>e(this,void 0,void 0,(function*(){const e=yield fetch(`${this.apiUrl}/api/v${this.protocolVersion}/documents`,{method:"POST",mode:"cors",headers:{"Content-Type":"application/json",Authorization:`Bearer ${this.token}`},body:JSON.stringify(t)});return yield b(e)((t=>t))})),this.postEncryptedKeysForData=(t,n)=>e(this,void 0,void 0,(function*(){const e=yield fetch(`${this.apiUrl}/api/v${this.protocolVersion}/documents/${n}`,{method:"POST",mode:"cors",headers:{"Content-Type":"application/json",Authorization:`Bearer ${this.token}`},body:JSON.stringify(t)});return yield b(e)((t=>{}))})),this.getDataKey=t=>e(this,void 0,void 0,(function*(){const e=yield fetch(`${this.apiUrl}/api/v${this.protocolVersion}/documents/keys/${t}`,{method:"GET",mode:"cors",headers:{"Content-Type":"application/json",Authorization:`Bearer ${this.token}`}});return yield b(e)((t=>t))})),this.getAllDataKeys=()=>e(this,void 0,void 0,(function*(){const t=yield fetch(`${this.apiUrl}/api/v${this.protocolVersion}/documents/keys`,{method:"GET",mode:"cors",headers:{"Content-Type":"application/json",Authorization:`Bearer ${this.token}`}});return yield b(t)((t=>t))})),this.getDataKeys=t=>e(this,void 0,void 0,(function*(){const e=yield fetch(`${this.apiUrl}/api/v${this.protocolVersion}/documents/keys`,{method:"POST",mode:"cors",headers:{"Content-Type":"application/json",Authorization:`Bearer ${this.token}`},body:JSON.stringify({data_ids:t})});return yield b(e)((t=>t))})),this.getMetadata=t=>e(this,void 0,void 0,(function*(){const e=yield fetch(`${this.apiUrl}/api/v${this.protocolVersion}/metadata?dataId=${t}`,{method:"GET",mode:"cors",headers:{"Content-Type":"application/json",Authorization:`Bearer ${this.token}`}});return yield b(e)((t=>t))})),this.updateUser=(t,n,r)=>e(this,void 0,void 0,(function*(){const e=yield fetch(`${this.apiUrl}/api/v${this.protocolVersion}/keys/me`,{method:"PUT",mode:"cors",headers:{"Content-Type":"application/json",Authorization:`Bearer ${this.token}`},body:JSON.stringify({encryptedPrivateEncryptionKey:y(t),encryptedPrivateSigningKey:y(n),keyDerivationSalt:y(r)})});return yield b(e)((t=>{}))})),this.giveAccess=(t,n)=>e(this,void 0,void 0,(function*(){const e=yield fetch(`${this.apiUrl}/api/v${this.protocolVersion}/documents/keys/user/${t}`,{method:"PUT",mode:"cors",headers:{"Content-Type":"application/json",Authorization:`Bearer ${this.token}`},body:JSON.stringify(n)});return yield b(e)((t=>{}))})),this.initializeUpload=()=>e(this,void 0,void 0,(function*(){const t=yield fetch(`${this.apiUrl}/api/v${this.protocolVersion}/init-upload`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${this.token}`},mode:"cors"});return yield b(t)((t=>t))})),this.storeMetadata=(t,n)=>e(this,void 0,void 0,(function*(){const e=yield fetch(`${this.apiUrl}/api/v${this.protocolVersion}/metadata`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${this.token}`},mode:"cors",body:JSON.stringify({dataID:t,metadata:n})});return yield b(e)((t=>{}))})),this.getUploadBlockUrl=(t,n)=>e(this,void 0,void 0,(function*(){const e=yield fetch(`${this.apiUrl}/api/v${this.protocolVersion}/get-upload-block-url`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${this.token}`},mode:"cors",body:JSON.stringify({dataId:t,chunkSize:n})});return yield b(e)((t=>t))})),this.finishUpload=(t,n)=>e(this,void 0,void 0,(function*(){const e=yield fetch(`${this.apiUrl}/api/v${this.protocolVersion}/finish-upload`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${this.token}`},mode:"cors",body:JSON.stringify({dataId:t,blockIds:n})});return yield b(e)((t=>{}))})),this.getDownloadLink=t=>e(this,void 0,void 0,(function*(){const e=yield fetch(`${this.apiUrl}/api/v${this.protocolVersion}/get-file-url/${t}`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${this.token}`},mode:"cors"});return yield b(e)((t=>t))})),this.updateToken=t=>this.token=t,this.clearToken=()=>this.token=void 0,this.token=t,this.apiUrl=n,this.protocolVersion=r}}const b=(t,n)=>r=>e(void 0,void 0,void 0,(function*(){switch(t.status){case 200:{const e=yield t.json();return{type:"Success",data:r(e)}}case 401:return{type:"AuthenticationNeeded"};case 400:return null!=n?{type:"Success",data:n}:{type:"Failed"};default:return{type:"Failed"}}}));class A extends Error{constructor(){super("Authentication to blindnet failed. Please generate a valid token."),this.code="blindnet.authentication",this.name="AuthenticationError",Object.setPrototypeOf(this,new.target.prototype)}}class S extends Error{constructor(t){super(t),this.code="blindnet.user_not_initialized",this.name="UserNotInitializedError",Object.setPrototypeOf(this,new.target.prototype)}}class E extends Error{constructor(){super("Wrong secret provided."),this.code="blindnet.secret",this.name="SecretError",Object.setPrototypeOf(this,new.target.prototype)}}class K extends Error{constructor(t){super(t),this.code="blindnet.data_format",this.name="BadFormatError",Object.setPrototypeOf(this,new.target.prototype)}}class U extends Error{constructor(t){super(t),this.code="blindnet.encryption",this.name="EncryptionError",Object.setPrototypeOf(this,new.target.prototype)}}class B extends Error{constructor(t){super(t),this.code="blindnet.service",this.name="BlindnetServiceError",Object.setPrototypeOf(this,new.target.prototype)}}class k extends Error{constructor(t){super(t),this.code="blindnet.not_encryptable",this.name="NotEncryptabeError",Object.setPrototypeOf(this,new.target.prototype)}}class P extends Error{constructor(t){super(t),this.code=7,this.name="NoAccessError",Object.setPrototypeOf(this,new.target.prototype)}}class O extends Error{constructor(t){super(t),this.code=8,this.name="UserNotFoundError",Object.setPrototypeOf(this,new.target.prototype)}}var x=Object.freeze({__proto__:null,AuthenticationError:A,UserNotInitializedError:S,SecretError:E,EncryptionError:U,BlindnetServiceError:B,NotEncryptabeError:k,NoAccessError:P,UserNotFoundError:O,BadFormatError:K});var $,T={},j=function(t,e){return t(e={exports:{}},e.exports),e.exports}((function(t,e){
/*! noble-ed25519 - MIT License (c) Paul Miller (paulmillr.com) */
Object.defineProperty(e,"__esModule",{value:!0}),e.utils=e.verify=e.sign=e.getPublicKey=e.SignResult=e.Signature=e.Point=e.ExtendedPoint=e.CURVE=void 0;const n={a:-1n,d:37095705934669439343138083508754565189542113879843219016388785533085940283555n,P:2n**255n-19n,n:2n**252n+27742317777372353535851937790883648493n,h:8n,Gx:15112221349535400772501151409588531511454012693041857206046113283949847762202n,Gy:46316835694926478169428394003475163141307993866256225615783033603165251855960n};e.CURVE=n;const r=32,i=19681161376707505956807079304988542015446066515923890162744021073123829784752n,o=25063068953384623474111414158702152701244531502492656460079210482610430750235n,s=54469307008909316920995813868745141605393597292927456921205312896311721017578n,a=1159843021668779879193775521855586647937357759715417654439879720876111806838n,c=40440834346308536858101042469323190826248399146238708352240133220865137265952n;class d{constructor(t,e,n,r){this.x=t,this.y=e,this.z=n,this.t=r}static fromAffine(t){if(!(t instanceof u))throw new TypeError("ExtendedPoint#fromAffine: expected Point");return t.equals(u.ZERO)?d.ZERO:new d(t.x,t.y,1n,A(t.x*t.y))}static toAffineBatch(t){const e=function(t,e=n.P){const r=t.length,i=new Array(r);let o=1n;for(let n=0;n<r;n++)0n!==t[n]&&(i[n]=o,o=A(o*t[n],e));o=S(o,e);for(let n=r-1;n>=0;n--){if(0n===t[n])continue;let r=A(o*t[n],e);t[n]=A(o*i[n],e),o=r}return t}(t.map((t=>t.z)));return t.map(((t,n)=>t.toAffine(e[n])))}static normalizeZ(t){return this.toAffineBatch(t).map(this.fromAffine)}static fromRistrettoHash(t){const e=b(t.slice(0,r)),n=this.calcElligatorRistrettoMap(e),i=b(t.slice(r,64)),o=this.calcElligatorRistrettoMap(i);return n.add(o)}static calcElligatorRistrettoMap(t){const{d:e}=n,r=A(i*t*t),s=A((r+1n)*a);let l=-1n;const u=A((l-e*r)*A(r+e));let{isValid:y,value:h}=K(s,u),f=A(h*t);w(f)||(f=A(-f)),y||(h=f),y||(l=r);const p=A(l*(r-1n)*c-u),v=h*h,g=A((h+h)*u),m=A(p*o),b=A(1n-v),S=A(1n+v);return new d(A(g*S),A(b*m),A(m*S),A(g*b))}static fromRistrettoBytes(t){const{a:e,d:i}=n,o="ExtendedPoint.fromRistrettoBytes: Cannot convert bytes to Ristretto Point",s=b(t);if(!function(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}(v(s,r),t)||w(s))throw new Error(o);const a=A(s*s),c=A(1n+e*a),l=A(1n-e*a),u=A(c*c),y=A(l*l),h=A(e*i*u-y),{isValid:f,value:p}=U(A(h*y)),g=A(p*l),m=A(p*g*h);let S=A((s+s)*g);w(S)&&(S=A(-S));const E=A(c*m),K=A(S*E);if(!f||w(K)||0n===E)throw new Error(o);return new d(S,E,1n,K)}toRistrettoBytes(){let{x:t,y:e,z:n,t:o}=this;const a=A((n+e)*(n-e)),c=A(t*e),{value:d}=U(A(a*c**2n)),l=A(d*a),u=A(d*c),y=A(l*u*o);let h;w(o*y)?([t,e]=[A(e*i),A(t*i)],h=A(l*s)):h=u,w(t*y)&&(e=A(-e));let f=A((n-e)*h);return w(f)&&(f=A(-f)),v(f,r)}equals(t){const e=t,[n,r,i,o]=[this.t,e.t,this.z,e.z];return A(n*o)===A(r*i)}negate(){return new d(A(-this.x),this.y,this.z,A(-this.t))}double(){const t=this.x,e=this.y,r=this.z,{a:i}=n,o=A(t**2n),s=A(e**2n),a=A(2n*r**2n),c=A(i*o),l=A((t+e)**2n-o-s),u=A(c+s),y=A(u-a),h=A(c-s),f=A(l*y),p=A(u*h),v=A(l*h),w=A(y*u);return new d(f,p,w,v)}add(t){const e=this.x,n=this.y,r=this.z,i=this.t,o=t.x,s=t.y,a=t.z,c=t.t,l=A((n-e)*(s+o)),u=A((n+e)*(s-o)),y=A(u-l);if(0n===y)return this.double();const h=A(2n*r*c),f=A(2n*i*a),p=A(f+h),v=A(u+l),w=A(f-h),g=A(p*y),m=A(v*w),b=A(p*w),S=A(y*v);return new d(g,m,S,b)}subtract(t){return this.add(t.negate())}multiplyUnsafe(t){if(!g(t))throw new TypeError("Point#multiply: expected number or bigint");let e=A(BigInt(t),n.n);if(1n===e)return this;let r=d.ZERO,i=this;for(;e>0n;)1n&e&&(r=r.add(i)),i=i.double(),e>>=1n;return r}precomputeWindow(t){const e=256/t+1;let n=[],r=this,i=r;for(let o=0;o<e;o++){i=r,n.push(i);for(let e=1;e<2**(t-1);e++)i=i.add(r),n.push(i);r=i.double()}return n}wNAF(t,e){!e&&this.equals(d.BASE)&&(e=u.BASE);const n=e&&e._WINDOW_SIZE||1;if(256%n)throw new Error("Point#wNAF: Invalid precomputation window, must be power of 2");let r=e&&l.get(e);r||(r=this.precomputeWindow(n),e&&1!==n&&(r=d.normalizeZ(r),l.set(e,r)));let i=d.ZERO,o=d.ZERO;const s=256/n+1,a=2**(n-1),c=BigInt(2**n-1),y=2**n,h=BigInt(n);for(let e=0;e<s;e++){const n=e*a;let s=Number(t&c);if(t>>=h,s>a&&(s-=y,t+=1n),0===s)o=o.add(e%2?r[n].negate():r[n]);else{const t=r[n+Math.abs(s)-1];i=i.add(s<0?t.negate():t)}}return[i,o]}multiply(t,e){if(!g(t))throw new TypeError("Point#multiply: expected number or bigint");const r=A(BigInt(t),n.n);return d.normalizeZ(this.wNAF(r,e))[0]}toAffine(t=S(this.z)){const e=A(this.x*t),n=A(this.y*t);return new u(e,n)}}e.ExtendedPoint=d,d.BASE=new d(n.Gx,n.Gy,1n,A(n.Gx*n.Gy)),d.ZERO=new d(0n,1n,1n,0n);const l=new WeakMap;class u{constructor(t,e){this.x=t,this.y=e}_setWindowSize(t){this._WINDOW_SIZE=t,l.delete(this)}static fromHex(t){const{d:e,P:r}=n,i=t instanceof Uint8Array?t:f(t);if(32!==i.length)throw new Error("Point.fromHex: expected 32 bytes");const o=i[31],s=-129&o,a=0!=(128&o),c=m(Uint8Array.from(Array.from(i.slice(0,31)).concat(s)));if(c>=r)throw new Error("Point.fromHex expects hex <= Fp");const d=A(c*c),l=A(d-1n),y=A(e*d+1n);let{isValid:h,value:p}=K(l,y);if(!h)throw new Error("Point.fromHex: invalid y coordinate");return a!==(1n===(1n&p))&&(p=A(-p)),new u(p,c)}static async fromPrivateKey(t){const n=await e.utils.sha512(O(t));return u.BASE.multiply(k(n))}toRawBytes(){const t=p(this.y),e=new Uint8Array(r);for(let n=t.length-2,i=0;i<r&&n>=0;n-=2,i++)e[i]=Number.parseInt(t[n]+t[n+1],16);const n=1n&this.x?128:0;return e[31]|=n,e}toHex(){return h(this.toRawBytes())}toX25519(){return A((1n+this.y)*S(1n-this.y))}equals(t){return this.x===t.x&&this.y===t.y}negate(){return new u(A(-this.x),this.y)}add(t){return d.fromAffine(this).add(d.fromAffine(t)).toAffine()}subtract(t){return this.add(t.negate())}multiply(t){return d.fromAffine(this).multiply(t,this).toAffine()}}e.Point=u,u.BASE=new u(n.Gx,n.Gy),u.ZERO=new u(0n,1n);class y{constructor(t,e){this.r=t,this.s=e}static fromHex(t){t=P(t);const e=u.fromHex(t.slice(0,32)),r=m(t.slice(32));if(!(0<(i=r)&&i<n.n))throw new Error("Signature.fromHex expects s <= CURVE.n");var i;return new y(e,r)}toRawBytes(){const t=f(p(this.s)).reverse(),e=new Uint8Array(r);e.set(t);const n=new Uint8Array(64);return n.set(this.r.toRawBytes()),n.set(e,32),n}toHex(){return h(this.toRawBytes())}}function h(t){let e="";for(let n=0;n<t.length;n++)e+=t[n].toString(16).padStart(2,"0");return e}function f(t){if("string"!=typeof t)throw new TypeError("hexToBytes: expected string, got "+typeof t);if(t.length%2)throw new Error("hexToBytes: received invalid unpadded hex");const e=new Uint8Array(t.length/2);for(let n=0;n<e.length;n++){const r=2*n;e[n]=Number.parseInt(t.slice(r,r+2),16)}return e}function p(t){const e=t.toString(16);return 1&e.length?`0${e}`:e}function v(t,e=32){return f(p(t).padStart(2*e,"0")).reverse()}function w(t){return 1n===(1n&A(t))}function g(t){return"bigint"==typeof t&&t>0n||!!("number"==typeof t&&t>0&&Number.isSafeInteger(t))}function m(t){let e=0n;for(let n=0;n<t.length;n++)e+=BigInt(t[n])<<8n*BigInt(n);return e}function b(t){return A(m(t)&2n**255n-1n)}function A(t,e=n.P){const r=t%e;return r>=0n?r:e+r}function S(t,e=n.P){if(0n===t||e<=0n)throw new Error(`invert: expected positive integers, got n=${t} mod=${e}`);let r=A(t,e),i=e,[o,s,a,c]=[0n,1n,1n,0n];for(;0n!==r;){const t=i/r,e=i%r,n=o-a*t,d=s-c*t;[i,r]=[r,e],[o,s]=[a,c],[a,c]=[n,d]}if(1n!==i)throw new Error("invert: does not exist");return A(o,e)}function E(t,e){const{P:r}=n;let i=t;for(;e-- >0n;)i*=i,i%=r;return i}function K(t,e){const r=A(e*e*e),o=A(r*r*e);let s=A(t*r*function(t){const{P:e}=n,r=t*t%e*t%e,i=E(r,2n)*r%e,o=E(i,1n)*t%e,s=E(o,5n)*o%e,a=E(s,10n)*s%e,c=E(a,20n)*a%e,d=E(c,40n)*c%e,l=E(d,80n)*d%e,u=E(l,80n)*d%e,y=E(u,10n)*s%e;return E(y,2n)*t%e}(t*o));const a=A(e*s*s),c=s,d=A(s*i),l=a===t,u=a===A(-t),y=a===A(-t*i);return l&&(s=c),(u||y)&&(s=d),w(s)&&(s=A(-s)),{isValid:l||u,value:s}}function U(t){return K(1n,t)}async function B(...t){const r=function(...t){if(1===t.length)return t[0];const e=t.reduce(((t,e)=>t+e.length),0),n=new Uint8Array(e);for(let e=0,r=0;e<t.length;e++){const i=t[e];n.set(i,r),r+=i.length}return n}(...t);return A(m(await e.utils.sha512(r)),n.n)}function k(t){const e=t.slice(0,r);return e[0]&=248,e[31]&=127,e[31]|=64,A(m(e),n.n)}function P(t){return t instanceof Uint8Array?t:f(t)}function O(t){let e;if("bigint"==typeof t||"number"==typeof t&&Number.isSafeInteger(t)){if(e=BigInt(t),e<0n||e>2n**256n)throw new Error("Expected 32 bytes of private key");t=e.toString(16).padStart(64,"0")}if("string"==typeof t){if(64!==t.length)throw new Error("Expected 32 bytes of private key");return f(t)}if(t instanceof Uint8Array){if(32!==t.length)throw new Error("Expected 32 bytes of private key");return t}throw new TypeError("Expected valid private key")}e.Signature=y,e.SignResult=y,e.getPublicKey=async function(t){const e=await u.fromPrivateKey(t);return"string"==typeof t?e.toHex():e.toRawBytes()},e.sign=async function(t,i){const o=await e.utils.sha512(O(i)),s=k(o),a=u.BASE.multiply(s),c=P(t),d=await B((l=o,l.slice(r)),c);var l;const h=u.BASE.multiply(d),f=A(d+await B(h.toRawBytes(),a.toRawBytes(),c)*s,n.n),p=new y(h,f);return"string"==typeof t?p.toHex():p.toRawBytes()},e.verify=async function(t,e,n){e=P(e),n instanceof u||(n=u.fromHex(n)),t instanceof y||(t=y.fromHex(t));const r=await B(t.r.toRawBytes(),n.toRawBytes(),e),i=d.fromAffine(n).multiplyUnsafe(r),o=d.BASE.multiply(t.s);return d.fromAffine(t.r).add(i).subtract(o).multiplyUnsafe(8n).equals(d.ZERO)},u.BASE._setWindowSize(8),e.utils={TORSION_SUBGROUP:["0100000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac037a","0000000000000000000000000000000000000000000000000000000000000080","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc05","ecffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff7f","26e8958fc2b227b045c3f489f2ef98f0d5dfac05d3c63339b13802886d53fc85","0000000000000000000000000000000000000000000000000000000000000000","c7176a703d4dd84fba3c0b760d10670f2a2053fa2c39ccc64ec7fd7792ac03fa"],randomPrivateKey:(t=32)=>{if("object"==typeof self&&"crypto"in self)return self.crypto.getRandomValues(new Uint8Array(t));if("object"==typeof process&&"node"in process.versions){const{randomBytes:e}=T;return new Uint8Array(e(t).buffer)}throw new Error("The environment doesn't have randomBytes function")},sha512:async t=>{if("object"==typeof self&&"crypto"in self){const e=await self.crypto.subtle.digest("SHA-512",t.buffer);return new Uint8Array(e)}if("object"==typeof process&&"node"in process.versions){const{createHash:e}=T,n=e("sha512");return n.update(t),Uint8Array.from(n.digest())}throw new Error("The environment doesn't have sha512 function")},precompute(t=8,e=u.BASE){const n=e.equals(u.BASE)?e:new u(e.x,e.y);return n._setWindowSize(t),n.multiply(1n),n}}}));($=j)&&$.__esModule&&Object.prototype.hasOwnProperty.call($,"default")&&$.default;var C=j.utils;j.verify;var I=j.sign,N=j.getPublicKey;function z(t,n){return e(this,void 0,void 0,(function*(){const e=yield crypto.subtle.digest("SHA-256",h(t,Uint8Array.from([n])));return new Uint8Array(e).slice(0,12)}))}function R(t,n,r=!1){return e(this,void 0,void 0,(function*(){const e="string"==typeof n?u(n):n,i=yield crypto.subtle.importKey("raw",d(t),"PBKDF2",!1,["deriveKey"]);return yield crypto.subtle.deriveKey({name:"PBKDF2",salt:e,iterations:1e5,hash:"SHA-256"},i,{name:"AES-GCM",length:256},r,["decrypt","encrypt","wrapKey","unwrapKey"])}))}function _(){return e(this,void 0,void 0,(function*(){return yield crypto.subtle.generateKey({name:"AES-GCM",length:256},!0,["encrypt","decrypt"])}))}function D(){return e(this,void 0,void 0,(function*(){return yield crypto.subtle.generateKey({name:"RSA-OAEP",modulusLength:4096,publicExponent:new Uint8Array([1,0,1]),hash:"SHA-256"},!0,["encrypt","decrypt","wrapKey","unwrapKey"])}))}function F(){return e(this,void 0,void 0,(function*(){const t=C.randomPrivateKey();return{privateKey:t,publicKey:yield N(t)}}))}function V(t,n){return e(this,void 0,void 0,(function*(){const e="string"==typeof t?d(t):t;return I(new Uint8Array(e),n)}))}function J(t){return crypto.subtle.importKey("jwk",t,{name:"RSA-OAEP",hash:"SHA-256"},!0,["wrapKey","encrypt"])}function G(t,n,r){return e(this,void 0,void 0,(function*(){return yield crypto.subtle.wrapKey("jwk",t,n,{name:"AES-GCM",iv:r})}))}function M(t,e){return crypto.subtle.wrapKey("jwk",t,e,{name:"RSA-OAEP"})}function H(t,n){return e(this,void 0,void 0,(function*(){const e="string"==typeof t?u(t):t;return yield crypto.subtle.unwrapKey("jwk",e,n,{name:"RSA-OAEP"},{name:"AES-GCM",length:256},!0,["encrypt","decrypt"])}))}function Z(t,n,r){return e(this,void 0,void 0,(function*(){return yield crypto.subtle.encrypt({name:"AES-GCM",iv:n},t,r)}))}function q(t,n,r){return e(this,void 0,void 0,(function*(){return crypto.subtle.decrypt({name:"AES-GCM",iv:n},t,r)}))}j.SignResult,j.Signature,j.Point,j.ExtendedPoint,j.CURVE;class L{constructor(){this.uploadBlock=(t,n,r,i)=>e(this,void 0,void 0,(function*(){switch((yield fetch(t,{method:"PUT",headers:{Authorization:n,"x-ms-date":r,"x-ms-blob-type":"BlockBlob","x-ms-version":"2021-04-10","Content-Type":"application/octet-stream"},mode:"cors",body:i})).status){case 201:return{type:"Success",data:void 0};default:return{type:"Failed"}}})),this.downloadBlob=(t,n,r)=>e(this,void 0,void 0,(function*(){const e=yield fetch(t,{method:"GET",headers:{Authorization:n,"x-ms-date":r,"x-ms-version":"2021-04-10"},mode:"cors"});switch(e.status){case 200:return{type:"Success",data:e.body};default:return{type:"Failed"}}}))}}function W(t,e,n=(t=>!0)){if("AuthenticationNeeded"===t.type)throw new A;if("Failed"!==t.type&&n(t.data))return t.data;throw new B(e)}class Y{constructor(t,e,n){this.data=t,this.metadata={},this.service=e,this.storageService=n}withMetadata(t){return this.metadata=t,this}forUser(t){return this.userIds=[t],this}forUsers(t){return this.userIds=t,this}forGroup(t){return this.groupId=t,this}encrypt(){return e(this,void 0,void 0,(function*(){const{data:t,metadata:n}=this;if(null==t)throw new K("Data can't be undefined or null");if("object"!=typeof n)throw new K("Metadata has to be an object");let r,i;if("string"==typeof t)r=d(t),i={type:"String"};else if(t instanceof File)r=yield t.arrayBuffer(),i={type:"File",name:t.name};else if(t instanceof ArrayBuffer||t instanceof Uint8Array)r=t,i={type:"Binary"};else{if("object"!=typeof t)throw new K("Encryption of provided data format is not supported");r=w((()=>d(JSON.stringify(t))),new K("Data in bad format")),i={type:"Json"}}const o=d(JSON.stringify(i)),s=p(o.byteLength),a=d(JSON.stringify(n)),c=function(t){return[t,t<<8,t<<16,t<<24].map((t=>t>>>24))}(a.byteLength);let f;if(null!=this.userIds&&"[object Array]"===Object.prototype.toString.call(this.userIds))f=yield this.service.getPublicKeys(this.userIds);else{if(null==this.groupId||"string"!=typeof this.groupId)throw new k("You must specify a list of users or a group to encrypt the data for");f=yield this.service.getGroupPublicKeys(this.groupId)}const v=W(f,"Fetching public keys failed");if(0==v.length)throw new k("Selected users not found");const m=h(new Uint8Array(s),new Uint8Array(c),o,a,r),b=yield g((()=>_()),new U("Could not generate key")),A=crypto.getRandomValues(new Uint8Array(12)),S=yield g((()=>Z(b,A,m)),new U("Could not encrypt data")),E=yield Promise.all(v.map((t=>e(this,void 0,void 0,(function*(){const e=yield g((()=>J(JSON.parse(l(u(t.publicEncryptionKey))))),new U("Public key in wrong format")),n=yield g((()=>M(b,e)),new U("Could not encrypt data key"));return{userID:t.userID,encryptedSymmetricKey:y(n)}}))))),B=W(yield this.service.postEncryptedKeys(E),"Could not upload the encrypted public keys");return{dataId:B,encryptedData:h(d(B),A.buffer,S)}}))}store(){return e(this,void 0,void 0,(function*(){const{data:t,metadata:n}=this;if(!(t instanceof File))throw new K("Only files are supported");if("object"!=typeof n)throw new K("Metadata has to be an object");const r=yield g((()=>_()),new U("Could not generate key"));let i;if(null!=this.userIds&&"[object Array]"===Object.prototype.toString.call(this.userIds))i=yield this.service.getPublicKeys(this.userIds);else{if(null==this.groupId||"string"!=typeof this.groupId)throw new k("You must specify a list of users or a group to encrypt the data for");i=yield this.service.getGroupPublicKeys(this.groupId)}const o=W(i,"Fetching public keys failed"),s=yield this.service.initializeUpload(),{dataId:a}=W(s,"Upload initialization failed"),c=yield Promise.all(o.map((t=>e(this,void 0,void 0,(function*(){const e=yield g((()=>J(JSON.parse(l(u(t.publicEncryptionKey))))),new U("Public key in wrong format")),n=yield g((()=>M(r,e)),new U("Could not encrypt data key"));return{userID:t.userID,encryptedSymmetricKey:y(n)}})))));W(yield this.service.postEncryptedKeysForData(c,a),"Could not upload the encrypted public keys");const f={type:"File",name:t.name,size:t.size},v=d(JSON.stringify(f)),w=p(v.byteLength),m=d(JSON.stringify(n)),b=h(new Uint8Array(w),v,m),A=crypto.getRandomValues(new Uint8Array(12)),S=yield g((()=>Z(r,A,b)),new U("Could not encrypt data")).then((t=>h(A.buffer,t)));W(yield this.service.storeMetadata(a,y(S)),"Could not store metadata");const E=4e6;const B=yield function t(n,i,o,s,a,c,d){return e(this,void 0,void 0,(function*(){if(i>=s.size)return a;const e=yield s.slice(i,i+E).arrayBuffer(),l=yield z(A,n),u=yield g((()=>Z(r,l,e)),new U("Could not encrypt data")),y=yield c.getUploadBlockUrl(o,u.byteLength),{blockId:h,date:f,authorization:p,url:v}=W(y,"Could not get upload url");return W(yield d.uploadBlock(v,p,f,u),"Could not upload data part"),t(n+1,i+E,o,s,[...a,h],c,d)}))}(0,0,a,t,[],this.service,this.storageService);return W(yield this.service.finishUpload(a,B),"Could not get upload url"),{dataId:a}}))}}class X{constructor(t,e,n){this.service=t,this.storageService=e,this.keyStore=n}static testBrowser(){return e(this,void 0,void 0,(function*(){try{const t=_();if(!(t instanceof Promise))return!1;const e=yield t,n=yield D(),r=yield F(),i=new a("blindnet_test");yield i.clear(),yield i.storeKey("test_key",e),yield i.storeKeys(n.privateKey,n.publicKey,r.privateKey,r.publicKey,e);if(!((yield i.getKey("test_key"))instanceof CryptoKey))return!1;const o=yield i.getKeys();if(!(o.eSK instanceof CryptoKey&&o.ePK instanceof CryptoKey&&o.sSK instanceof Uint8Array&&o.sPK instanceof Uint8Array&&o.aes instanceof CryptoKey))return!1;yield i.clear()}catch(t){return console.error(t),!1}return!0}))}static initCustomKeyStore(t,e,n=X.apiUrl){const r=new m(t,n,X.protocolVersion),i=new L;return new X(r,i,e)}static init(t,e=X.apiUrl){const n=new m(t,e,X.protocolVersion),r=new L,i=new a;return new X(n,r,i)}static disconnect(){return e(this,void 0,void 0,(function*(){yield(new a).clear()}))}disconnect(){return e(this,void 0,void 0,(function*(){this.service.clearToken(),yield this.keyStore.clear()}))}refreshToken(t){this.service.updateToken(t)}static deriveSecrets(t){return e(this,void 0,void 0,(function*(){const{secret1:n,secret2:r}=yield function(t,n=new Uint8Array([241,211,153,239,17,34,5,112,167,218,57,131,99,29,243,84])){return e(this,void 0,void 0,(function*(){const e=0===t.length||null==t?"seed":t,r=yield crypto.subtle.importKey("raw",d(e),"PBKDF2",!1,["deriveBits"]),i=yield crypto.subtle.deriveBits({name:"PBKDF2",salt:n,iterations:64206,hash:"SHA-256"},r,512);return{secret1:new Uint8Array(i,0,32),secret2:new Uint8Array(i,32,32)}}))}(t);return{blindnetSecret:y(n),appSecret:y(r)}}))}getKeys(){return e(this,void 0,void 0,(function*(){const t=yield g((()=>this.keyStore.getKeys()),new S("Keys not initialized"));if(0===Object.values(t).length||Object.values(t).some((t=>null==t)))throw new S("Keys not initialized");return t}))}connect(t){return e(this,void 0,void 0,(function*(){yield this.keyStore.clear();const n=W(yield this.service.getUserData(),"Fetching user data failed");switch(n.type){case"UserNotFound":{const{privateKey:e,publicKey:n}=yield D(),{privateKey:i,publicKey:o}=yield F(),s=d(JSON.stringify(yield(r=n,crypto.subtle.exportKey("jwk",r)))),a=yield V(this.service.token,i),c=yield V(s,i),l=crypto.getRandomValues(new Uint8Array(16)),u=yield R(t,l),y=yield G(e,u,new Uint8Array(12)),f=yield Z(u,new Uint8Array(12).map((t=>1)),h(i,o));return W(yield this.service.registerUser(s,o,y,f,l,a,c),"User could not be registered"),void(yield this.keyStore.storeKeys(e,n,i,o,u))}case"UserFound":{const{enc_PK:r,e_enc_SK:i,sign_PK:o,e_sign_SK:s,salt:a}=n.userData,c=yield J(JSON.parse(l(u(r)))),d=yield R(t,a),y=yield g((()=>function(t,n,r){return e(this,void 0,void 0,(function*(){const e="string"==typeof t?u(t):t;return crypto.subtle.unwrapKey("jwk",e,n,{name:"AES-GCM",iv:r},{name:"RSA-OAEP",hash:"SHA-256"},!0,["decrypt","unwrapKey"])}))}(i,d,new Uint8Array(12))),new E),h=yield g((()=>q(d,new Uint8Array(12).map((t=>1)),u(s))),new E);return void(yield this.keyStore.storeKeys(y,c,new Uint8Array(h).slice(0,32),u(o),d))}}var r}))}capture(t){return new Y(t,this.service,this.storageService)}retrieve(t){return e(this,void 0,void 0,(function*(){const{eSK:n}=yield this.getKeys(),r=W(yield this.service.getDataKey(t),`Fetching data key failed for data with id ${t}`),i=yield g((()=>H(u(r),n)),new U(`Encrypted data key for data with id ${t} could not be decrypted`)),o=u(W(yield this.service.getMetadata(t),`Fetching metadata failed for id ${t}`)),s=o.slice(0,12),a=yield g((()=>q(i,s,o.slice(12))),new U(`Encrypted data with id ${t} could not be decrypted`));let c,d;try{const t=v(Array.from(new Uint8Array(a.slice(0,2)))),e=a.slice(2,2+t);d=JSON.parse(l(e));const n=a.slice(2+t);c=JSON.parse(l(n))}catch(t){throw new K("Bad data provided")}const y=yield this.service.getDownloadLink(t),{date:h,authorization:f,url:p}=W(y,"Could not get download link"),w=W(yield this.storageService.downloadBlob(p,f,h),"Could not download file"),m=4000016,b=w.getReader(),A=new ReadableStream({start(t){let e=new Uint8Array;!function n(){b.read().then((r=>{const{done:i,value:o}=r;if(i)return e.length>0&&t.enqueue(e.slice(0,e.length)),void t.close();if(e.length+o.length===m)(s=new Uint8Array(m)).set(e,0),s.set(o,e.length),t.enqueue(s),e=new Uint8Array;else if(e.length+o.length<m){(s=new Uint8Array(e.length+o.length)).set(e,0),s.set(o,e.length),e=new Uint8Array(s)}else if(e.length+o.length>m){var s;(s=new Uint8Array(m)).set(e,0),s.set(o.slice(0,m-e.length),e.length),t.enqueue(s);function n(r){if(r.length<m)e=new Uint8Array(r);else{const e=r.slice(0,m);t.enqueue(e),n(r.slice(m))}}n(o.slice(m-e.length))}n()}))}()}}).getReader();return{data:new ReadableStream({start:t=>function n(r){A.read().then((o=>e(this,void 0,void 0,(function*(){const{done:e,value:a}=o;if(e||void 0===a)return void t.close();const c=yield z(s,r),d=yield q(i,c,a);return t.enqueue(new Uint8Array(d)),n(r+1)}))))}(0)}),metadata:c,dataType:d}}))}decrypt(t){return e(this,void 0,void 0,(function*(){const{eSK:e}=yield this.getKeys(),n=w((()=>l(t.slice(0,36))),new K("Bad data provided"));if(36!==n.length)throw new K("Bad data provided");const r=W(yield this.service.getDataKey(n),`Fetching data key failed for data with id ${n}`),i=yield g((()=>H(u(r),e)),new U(`Encrypted data key for data with id ${n} could not be decrypted`)),o=yield g((()=>q(i,t.slice(36,48),t.slice(48))),new U(`Encrypted data with id ${n} could not be decrypted`));let s,a,c;try{const t=v(Array.from(new Uint8Array(o.slice(0,2)))),e=o.slice(6,6+t);c=JSON.parse(l(e));const n=f(Array.from(new Uint8Array(o.slice(2,6)))),r=o.slice(6+t,6+t+n);a=JSON.parse(l(r)),s=o.slice(6+t+n)}catch(t){throw new K("Bad data provided")}switch(c.type){case"String":return{data:w((()=>l(s)),new K("Bad data provided")),metadata:a,dataType:c};case"File":{const t=c.name;return{data:w((()=>new File([s],t)),new K("Bad data provided")),metadata:a,dataType:c}}case"Binary":return{data:s,metadata:a,dataType:c};case"Json":return{data:w((()=>JSON.parse(l(s))),new K("Bad data provided")),metadata:a,dataType:c}}}))}decryptMany(t){return e(this,void 0,void 0,(function*(){const{eSK:n}=yield this.getKeys(),r=t.map((t=>{const e=w((()=>l(t.slice(0,36))),new K("Bad data provided"));if(36!==e.length)throw new K("Bad data provided");return e})),i=W(yield this.service.getDataKeys(r),`Fetching data keys failed for ids ${r}`,(t=>r.every((e=>t.find((t=>t.documentID===e))))));return Promise.all(t.map(((t,o)=>e(this,void 0,void 0,(function*(){const e=r[o],s=yield g((()=>H(u(i.find((t=>t.documentID===e)).encryptedSymmetricKey),n)),new U(`Encrypted data key for data with id ${e} could not be decrypted`)),a=yield g((()=>q(s,t.slice(36,48),t.slice(48))),new U(`Encrypted data with id ${e} could not be decrypted`));let c,d,y;try{const t=v(Array.from(new Uint8Array(a.slice(0,2)))),e=a.slice(6,6+t);y=JSON.parse(l(e));const n=f(Array.from(new Uint8Array(a.slice(2,6)))),r=a.slice(6+t,6+t+n);d=JSON.parse(l(r)),c=a.slice(6+t+n)}catch(t){throw new K(`Bad data provided for id ${e}`)}switch(y.type){case"String":return{data:w((()=>l(c)),new K("Bad data provided")),metadata:d,dataType:y};case"File":{const t=y.name;return{data:w((()=>new File([c],t)),new K("Bad data provided")),metadata:d,dataType:y}}case"Binary":return{data:c,metadata:d,dataType:y};case"Json":return{data:w((()=>JSON.parse(l(c))),new K("Bad data provided")),metadata:d,dataType:y}}})))))}))}changeSecret(t){return e(this,void 0,void 0,(function*(){const{eSK:e,sSK:n}=yield this.getKeys(),r=crypto.getRandomValues(new Uint8Array(16)),i=yield R(t,r),o=yield G(e,i,new Uint8Array(12)),s=yield crypto.subtle.encrypt({name:"AES-GCM",iv:new Uint8Array(12).map((t=>1))},i,n);W(yield this.service.updateUser(o,s,r),"Could not upload the new keys"),yield this.keyStore.storeKey("derived",i)}))}giveAccess(t){return e(this,void 0,void 0,(function*(){const{eSK:n}=yield this.getKeys(),r=W(yield this.service.getUsersPublicKey(t),`Fetching the public key of a user ${t} failed`),i=W(yield this.service.getAllDataKeys(),"Fetching the encrypted data keys failed"),o=yield g((()=>J(JSON.parse(l(u(r.publicEncryptionKey))))),new U("Public key in wrong format")),s=yield Promise.all(i.map((r=>e(this,void 0,void 0,(function*(){const e=yield g((()=>H(r.encryptedSymmetricKey,n)),new U(`Could not decrypt a data key for data id ${r.documentID}`)),i=yield g((()=>M(e,o)),new U(`Could not encrypt data key for user ${t}`));return{documentID:r.documentID,encryptedSymmetricKey:y(i)}})))));W(yield this.service.giveAccess(t,s),`Uploading the encrypted data keys for a user ${t} failed`)}))}}X.protocolVersion="1",X.apiUrl="https://api.blindnet.io",X.testUrl="https://test.blindnet.io";const Q={toBase64:y,fromBase64:u,toHex:function(t){let e="";const n="0123456789ABCDEF";return(t instanceof ArrayBuffer?new Uint8Array(t):t).forEach((t=>{e+=n[t>>4]+n[15&t]})),e},fromHex:function(t){for(var e=[],n=0;n<t.length;n+=2)e.push(parseInt(t.substr(n,2),16));return new Uint8Array(e)}};t.Blindnet=X,t.error=x,t.util=Q,Object.defineProperty(t,"__esModule",{value:!0})}));
